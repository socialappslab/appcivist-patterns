!function(a,b,c){a.Campaign=function(a){this.initialize(a)},p=a.Campaign.prototype,p.constructor=a.Campaign,p.initialize=function(c){this.appEl=b.querySelector(c),null!=this.appEl&&(this.contextualMenu=new a.ContextualMenu(this.appEl.querySelector(".heading_actions")),console.log("»| campaign »»",this.contextualMenu))}}(window.appcvui=window.appcvui||{},document,window),function(a,b,c,d){a.ContextualMenu=function(a){this.initialize(a)},p=a.ContextualMenu.prototype,p.constructor=a.ContextualMenu,p.initialize=function(a){a&&(this.hideMenuTimeoutDuration=250,this.hideMenuTimeout=null,this.menuSelector=".contextual_menu",this.actuatorSelector=".action__contextual_menu",this.bodyClickEventListener=null,this.el=a,this.menu=this.el.querySelector(this.menuSelector),this.actuator=this.el.querySelector(this.actuatorSelector),this.actuator.addEventListener("mouseenter",function(a){c.clearTimeout(this.hideMenuTimeout),this.showContextualMenu()}.bind(this)),this.actuator.addEventListener("click",function(a){a.preventDefault(),this.showContextualMenu(!0)}.bind(this)),this.actuator.addEventListener("mouseleave",function(a){this.menu.classList.contains("stay")||this.initiateContextualMenuTimeout()}.bind(this)),this.menu.addEventListener("mouseenter",function(a){c.clearTimeout(this.hideMenuTimeout)}.bind(this)),this.menu.addEventListener("mouseleave",function(a){this.menu.classList.contains("stay")||this.initiateContextualMenuTimeout()}.bind(this)),this.menu.querySelector(".action__history").addEventListener("click",function(a){a.preventDefault(),d.open({unsafeContent:b.querySelector(".history-modal").innerHTML})}))},p.showContextualMenu=function(a){this.setPosition(),this.attachOnClikcOutside(),a&&(this.el.classList.add("reveal_actions"),this.actuator.classList.add("active"),this.menu.classList.add("stay")),c.clearTimeout(this.hideMenuTimeout),this.menu.classList.add("active")},p.hideContextualMenu=function(){b.body.removeEventListener("click",this.bodyClickEventListener),c.clearTimeout(this.hideMenuTimeout),this.menu.classList.remove("active")},p.initiateContextualMenuTimeout=function(){c.clearTimeout(this.hideMenuTimeout),this.hideMenuTimeout=setTimeout(this.hideContextualMenu.bind(this),this.hideMenuTimeoutDuration)},p.attachOnClikcOutside=function(){this.bodyClickEventListener=b.body.addEventListener("click",function(a){a.preventDefault(),this.closeIfClickOutside(a)}.bind(this))},p.setPosition=function(){this.menu.parentElement.getBoundingClientRect();this.menu.style.top="1em",this.menu.style.left="auto",this.menu.style.right=0},p.closeIfClickOutside=function(a){c.clearTimeout(this.hideMenuTimeout),this.menu.contains(a.target)||this.actuator.contains(a.target)||(this.el.classList.remove("reveal_actions"),this.actuator.classList.remove("active"),this.menu.classList.remove("stay"),this.hideContextualMenu())}}(window.appcvui=window.appcvui||{},document,window,window.vex),function(a,b){var c=a.appcvui||{};c.Navigation=function(a,b){this.initialize(a,b)},p=c.Navigation.prototype,p.constructor=c.Navigation,p.initialize=function(a,c){this.appEl=b.querySelector(a),null!=this.appEl&&(this.el=b.querySelector(c),null!=this.el&&(this.toggle=this.el.querySelector(".button__nav_toggle"),this.toggle.addEventListener("click",this.toggleNav.bind(this))))},p.toggleNav=function(a){this.appEl.classList.toggle("nav--active"),this.el.classList.toggle("nav--active")},a.appcvui=c}(window,document),function(a,b,c){a.Proposal=function(a){this.initialize(a)},p=a.Proposal.prototype,p.constructor=a.Proposal,p.initialize=function(c){this.appEl=b.querySelector(c),null!=this.appEl&&(this.contextualMenu=new a.ContextualMenu(this.appEl.querySelector(".heading_actions")),console.log("»| proposal single »»",this.contextualMenu))}}(window.appcvui=window.appcvui||{},document,window),function(a,b,c){a.ProposalsAndIdeas=function(a){this.themeWidget,this.initialize(a)},p=a.ProposalsAndIdeas.prototype,p.constructor=a.ProposalsAndIdeas,p.initialize=function(c){if(this.appEl=b.querySelector(c),null!=this.appEl){this.proposals=this.appEl.querySelectorAll(".card__proposal"),this.ideas=this.appEl.querySelectorAll(".card__idea"),this.showIdeasButton=this.appEl.querySelector(".proposals__show_ideas"),this.hideIdeasButton=this.appEl.querySelector(".ideas__hide_ideas"),this.addProposalButton=this.appEl.querySelector(".proposals__add_new"),this.addIdeaButton=this.appEl.querySelector(".ideas__add_new");var d=this;null!=b.querySelector(".campaign__filters .filters")&&(this.themeWidget=new a.ThemeWidget(".campaign__filters .filters")),null!=this.showIdeasButton&&this.showIdeasButton.addEventListener("click",function(a){a.preventDefault(),d.showIdeas(d)}),null!=this.hideIdeasButton&&this.hideIdeasButton.addEventListener("click",function(a){a.preventDefault(),d.hideIdeas(d)}),null!=this.addProposalButton&&this.addProposalButton.addEventListener("click",function(a){a.preventDefault(),d.addProposal(d)}),null!=this.addIdeaButton&&this.addIdeaButton.addEventListener("click",function(a){a.preventDefault(),d.addIdea(d)}),null!=this.proposals&&a.forEach(this.proposals,this.initializeContextualMenu,this),null!=this.idas&&a.forEach(this.ideas,this.initializeContextualMenu,this),b.addEventListener("resize",this.onResize),this.onResize()}},p.onResize=function(){null!=b.querySelector(".container__proposals")&&(a.equalHeights(".container__proposals .card__header"),a.equalHeights(".container__proposals .card__body .excerpt")),null!=b.querySelector(".container__ideas")&&a.equalHeights(".container__ideas .card__header")},p.showIdeas=function(a){a.appEl.querySelector(".campaign_cards").classList.add("show-ideas"),a.showIdeasTimeout=c.setTimeout(function(){clearTimeout(a.showIdeasTimeout),a.onResize()},250)},p.hideIdeas=function(a){a.appEl.querySelector(".campaign_cards").classList.remove("show-ideas"),a.showIdeasTimeout=c.setTimeout(function(){clearTimeout(a.showIdeasTimeout),a.onResize()},250)},p.addProposal=function(a){vex.open({unsafeContent:a.appEl.querySelector(".form__add_proposal").innerHTML})},p.addIdea=function(a){vex.open({unsafeContent:a.appEl.querySelector(".form__add_idea").innerHTML})},p.initializeContextualMenu=function(b,c){new a.ContextualMenu(c.querySelector(".card__heading_actions"))}}(window.appcvui=window.appcvui||{},document,window),function(a,b,c,d){a.ThemeWidget=function(a){this.initialize(a)},p=a.ThemeWidget.prototype,p.constructor=a.ThemeWidget,p.initialize=function(a,c){this.el=b.querySelector(a),this.content=this.el.querySelector("content"),this.addFilterButton=this.el.querySelector(".button__add_filter"),this.addFilterButton.addEventListener("click",this.showAvailableThemes.bind(this))},p.showAvailableThemes=function(){d.open({unsafeContent:this.el.querySelector(".modal-content").innerHTML})}}(window.appcvui=window.appcvui||{},document,window,window.vex),function(a,b){var c=a.appcvui||{};c.equalHeights=function(a){var c,d,e,f=b.querySelectorAll(a),g=f.length,h=0;for(e=0;e<g;e++)c=f[e],d=c.offsetHeight,h=d>h?d:h;for(e=0;e<g;e++)f[e].style.height=h+"px"},c.forEach=function(a,b,c){for(var d=0;d<a.length;d++)b.call(c,d,a[d])},c.closest=function(a,b){for(var c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector;a&&!c.call(a,b);)a=a.parentElement;return a},c.initialize=function(){vex.defaultOptions.className="vex-theme-plain",c.navigation=new c.Navigation(".appcivist","#appcivist__nav"),null!=b.querySelector(".proposals_and_ideas")?c.proposalsAndIdeas=new c.ProposalsAndIdeas(".proposals_and_ideas"):null!=b.querySelector(".proposals__only")&&(c.proposals=new c.ProposalsAndIdeas(".proposals__only")),null!=b.querySelector(".campaign")&&(console.log("|»»","campaign"),c.campaign=new c.Campaign(".campaign")),null!=b.querySelector(".working_group")&&(console.log("|»»","working group"),c.working_group=new c.WorkingGroup(".working_group")),null!=b.querySelector(".proposal__single")&&(console.log("|»»","proposal single"),c.proposal=new c.Proposal(".proposal__single"))},a.appcvui=c}(window,document),function(a,b,c){a.WorkingGroup=function(a){this.initialize(a)},p=a.WorkingGroup.prototype,p.constructor=a.WorkingGroup,p.initialize=function(c){this.appEl=b.querySelector(c),null!=this.appEl&&(this.contextualMenu=new a.ContextualMenu(this.appEl.querySelector(".heading_actions")))}}(window.appcvui=window.appcvui||{},document,window);